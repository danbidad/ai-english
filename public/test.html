<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>3단 자막 스크롤 애니메이션</title>
	<style>
		body {
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
			Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
			background-color: #1a1a1a;
			color: white;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 100vh;
			margin: 0;
			overflow: hidden;
		}

		.subtitle-container {
			position: relative;
			height: 220px;
			width: 90%;
			max-width: 700px;
			margin: 20px auto;
			background: #282828;
			border-radius: 10px;
			overflow: hidden;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
		}

		.subtitle {
			position: absolute;
			width: 100%;
			padding: 0 20px;
			text-align: center;
			top: 50%;
			box-sizing: border-box;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			transition: transform 0.5s ease-in-out,
			opacity 0.5s ease-in-out,
			font-size 0.5s ease-in-out;
		}

		/* 현재 자막 */
		.subtitle.current {
			transform: translateY(-50%) scale(1.1);
			opacity: 1;
			font-size: 1.8rem;
			font-weight: 700;
			color: #f1c40f;
		}

		/* 이전 자막 */
		.subtitle.previous {
			transform: translateY(-110px) scale(0.85);
			opacity: 0.4;
			font-size: 1.2rem;
			color: #eee;
		}

		/* 다음 자막 */
		.subtitle.next {
			transform: translateY(70px) scale(0.85);
			opacity: 0.4;
			font-size: 1.2rem;
			color: #eee;
		}

		/* (애니메이션용) 화면 밖 - 새로 들어올 자막 */
		.subtitle.entering {
			transform: translateY(140px) scale(0.7);
			opacity: 0;
		}

		/* (애니메이션용) 화면 밖 - 사라질 자막 */
		.subtitle.exiting {
			transform: translateY(-170px) scale(0.7);
			opacity: 0;
		}

		/* 데모용 버튼 */
		button {
			font-size: 1rem;
			padding: 10px 20px;
			border: none;
			border-radius: 5px;
			background: #f1c40f;
			color: #333;
			font-weight: bold;
			cursor: pointer;
			margin-top: 20px;
		}
	</style>
</head>
<body>

<h1>3단 자막 스크롤 애니메이션</h1>
<div class="subtitle-container" id="subtitleContainer">
</div>

<button id="nextButton">다음 자막 (클릭)</button>

<script>
	// 0. 데모를 위한 자막 데이터
	const sampleSubtitles = [
		"첫 번째 자막입니다.",
		"두 번째 자막이 가운데로 스크롤됩니다.",
		"이것이 현재 자막입니다.",
		"CSS Transform과 Transition을 사용합니다.",
		"JavaScript는 클래스만 변경합니다.",
		"애니메이션은 CSS가 처리합니다.",
		"이전 자막은 위로 올라가고,",
		"다음 자막은 아래에서 대기합니다.",
		"이렇게 스크롤 애니메이션이 완성됩니다.",
		"마지막 자막입니다.",
	];

	const container = document.getElementById('subtitleContainer');
	const nextButton = document.getElementById('nextButton'); // 버튼 찾기

	let currentIndex = -1;

	// 1. 자막 갱신 함수
	function updateSubtitles() {
		currentIndex++;
		if (currentIndex >= sampleSubtitles.length) {
			currentIndex = 0; // 순환
		}

		const exitingDiv = container.querySelector('.previous');
		const previousDiv = container.querySelector('.current');
		const currentDiv = container.querySelector('.next');

		if (exitingDiv) {
			exitingDiv.className = 'subtitle exiting';
			setTimeout(() => {
				if (exitingDiv.parentElement) {
					container.removeChild(exitingDiv);
				}
			}, 500);
		}
		if (previousDiv) previousDiv.className = 'subtitle previous';
		if (currentDiv) currentDiv.className = 'subtitle current';

		const nextIndex = (currentIndex + 1) % sampleSubtitles.length;
		if (sampleSubtitles[nextIndex]) {
			const nextDiv = createSubtitleDiv(nextIndex, 'entering');
			container.appendChild(nextDiv);

			setTimeout(() => {
				nextDiv.className = 'subtitle next';
			}, 10);
		}
	}

	// 2. 자막 DIV 생성 헬퍼 함수
	function createSubtitleDiv(index, initialClass) {
		const div = document.createElement('div');
		div.className = `subtitle ${initialClass}`;
		div.textContent = sampleSubtitles[index] || '';
		div.dataset.index = index;
		return div;
	}

	// 3. 초기 자막 설정
	function initialize() {
		currentIndex = 0;

		const current = createSubtitleDiv(0, 'current');
		const next = createSubtitleDiv(1, 'next');
		const prev = createSubtitleDiv(-1, 'previous');

		container.append(prev, current, next);
	}

	// 4. 이벤트 리스너 (버튼과 함수 연결)
	nextButton.addEventListener('click', updateSubtitles);

	// 5. 실행
	initialize();
</script>

</body>
</html>
